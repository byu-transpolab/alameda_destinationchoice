[
["index.html", "If you build it who will come? Equity analysis of park system changes using passive origin-destination data 1 Introduction", " If you build it who will come? Equity analysis of park system changes using passive origin-destination data Gregory Macfarlane BYUgregmacfarlane@byu.edu Teresa Tapia StreetLightteresa.tapia@streetlightdata.com Carole Turley-Voulgaris Harvardcvoulgaris@gsd.harvard.edu 2021-02-04 Abstract During the spring and summer of 2020, many cities across the world adopted a policy of converting roadway facilities into open pedestrian spaces. This policy was designed to meaningfully improve access to public recreation areas, but the degree to which this access improved among different populations is an important research question. In particular, academic and practical methods to measure socio-spatial access to park facilites rely on arbitrary definitions and are not based in revealed preferences for park facilities. In this study, we evaluate the change in a utility-based park accessibility measure resulting from street conversions in Alameda County, California. Our utility-based accessibility measure is constructed from a park activity location choice model we estimate using mobile device data — supplied by StreetLight Data, Inc. — representing trips to parks in that county. The estimated model reveals heterogeneity in inferred affinity for park attributes among different sociodemographic groups. When applied to the street conversion policy in Alameda County, the model suggests an aggregate household-level consumer surplus of over $100 thousand (per park trip frequency). This surplus is pro-social in that Black and low-income households receive a greater share of the surplus than expected based on the population distribution. 1 Introduction Parks and other green spaces generate immense value for the public who are able to access them. The City Parks Alliance (2019) categorizes the observed benefits of urban parks as encouraging active lifestyles (Bancroft et al. 2015), contributing to local economies, aiding in stormwater management and flood mitigation, improving local air quality, increasing community engagement (Madzia et al. 2018), and enhancing public equity. For many, the value of public parks and open public spaces increased during the widespread lockdowns enacted in 2020 to slow the transmission of COVID-19. With many other entertainment venues shuttered and people otherwise confined to their homes, periodic use of public space provided many with emotional relief unavailable in other forms. Paired with this increased demand for public open space — and the with the epidemiological requirement to leave sufficient space between other users — was the related collapse in demand for vehicular travel. As a result, cities around the world began closing select streets to automobile travel, thereby opening them as pedestrian plazas. The effective result of this policy was to create a number of “parks” in urban areas that may have had poor access previously. Understanding the equitable distribution of these benefits is an important land use policy issue. The potential for non-emergency temporary or permanent street conversions also brings up interesting problems for land use and transportation policy; indeed, the possibility for transportation infrastructure to itself become a socially beneficial land use is a tantalizing proposition. Unfortunately, quantifying the benefits derived from access to parks in general is a complicated problem. Many previous attempts at quantifying access in terms of isochronal distances or greenspace concentration have resulted in a frustrating lack of clarity on the relationship between thus measured access and measures of physical and emotional health (Bancroft et al. 2015). Central to this confusion is the simple fact that people do not always use the nearest park, especially if it does not have qualities that they find attractive. A better methodology would be to evaluate the park activity location choices of people in a metropolitan area to identify which features of parks — distance, amenities, size, etc. — are valued and which are less valued. The resulting activity location choice model would enable the evaluation of utility benefits via the choice model logsum (Handy and Niemeier 1997; Jong et al. 2007). In this study, we seek to evaluate the socio-spatial distribution of benefits received by residents of Alameda County, California resulting from the temporary conversion of streets to public open spaces during the spring and summer of 2020. We estimate a park activity location choice model using location-based services (LBS) data obtained through StreetLight Data, Inc., a commercial data aggregator. The resulting model illuminates the degree to which constructed individuals living in U.S. Census block groups of varying sociodemographic characteristics value the travel distance between block group and parks, the size of the parks, and the amenities of parks including sport fields, playgrounds, and walking trails in Alameda county. We then apply this model to examine the inferred monetary benefit resulting from the street conversion policy, and its distribution among different sociodemographic groups. The paper proceeds in the following manner: A discussion of prior attempts to evaluate park accessibility and preferences is given directly. A Methodology section presents our data gathering and cleaning efforts as well as the econometric framework for the location choice model. A Results section presents the estimated choice model coefficients alongside a discussion of their implications, followed by an analysis of the implied benefits resulting from the street conversion policy. After presenting limitations and associated avenues for future research, a final Conclusions section outlines the contributions of this study for recreational trip modeling and location choice modeling more generally. "],
["literature.html", " 2 Literature 2.1 Sociodemographic variation in park utility 2.2 Defining and measuring park accessibility 2.3 Street Conversion Equity Analysis", " 2 Literature Understanding the equity benefit distribution of park access requires us to consider two integrated but rather distinct literatures. First, we consider the disparity in park utility perception among individuals of different backgrounds. We subsequently consider quantitative techniques to evaluate the access that individuals have to park facilities. 2.1 Sociodemographic variation in park utility The idea that different racial, ethnic, or cultural groups have different recreational styles, and might thus have different needs and preferences for parks and open space, has been thoroughly discussed in the leisure studies literature, and Husbands and Idahosa (1995) offer a detailed review of that research as of the mid-1990s. In general, explanations for racial and ethnic differences in park use can be classified into two categories: those rooted in cultural and lifestyle differences, and those rooted in discrimination and marginalization. Byrne and Wolch (2009) summarize literature in the former category, noting that African Americans have been described as preferring more social, sports-oriented spaces, relative to white people who prefer secluded natural settings (Washburne 1978; Hutchison 1987; Floyd and Shinew 1999; Gobster 2002; Payne, Mowen, and Orsega-Smith 2002; Ho et al. 2005); Asians are described as valuing aesthetics over recreational spaces; (Gobster 2002; Payne, Mowen, and Orsega-Smith 2002; Ho et al. 2005), and Latinos are said to value group-oriented amenities like picnic tables and restrooms (Baas, Ewert, and Chavez 1993; Hutchison 1987; Irwin, Gartner, and Phelps 1990). Byrne and Wolch (2009) criticize such scholarship as having grossly exaggerated ethno-racial differences in park use and preferences, and suggest a model for explaining park use based on four elements: Sociodemographic characteristics; park amenities and surrounding land uses; historical/cultural context of park provision (including development politics and discriminatory land-use policies); and individual perceptions of park space (including safety and sense of welcome). Byrne (2012) applies a cultural politics theoretical frame to why people of color are underrepresented among visitors to some urban parks. Focus groups of Latino residents emphasized the importance of parks to children and childhood. Participants described visiting parks with their children and the positive and negatives associations that parks evoked of their own childhood memories of parks and wilderness. Participants described barriers to visiting parks including distance, inadequate or poorly maintained facilities, and fear of crime. They cited a lack of Spanish-language signage not only as a barrier to understanding but also as a signal that a park was not intended to serve Spanish speakers. Participants also expressed that they did not feel welcome in parks located in high-income or predominantly white neighborhoods, either because they expected that other park users would have racist attitudes, or because they expected that a more boisterous Latino ‘recreational style’ would not be tolerated or that there would be other behavioral norms they were not aware of. In an observational and survey-based study of park users in Los Angeles, Loukaitou-Sideris (1995) found a high-level of enthusiasm for park use among Hispanic people. While she found, consistent with prior research (Baas, Ewert, and Chavez 1993; Hutchison 1987; Irwin, Gartner, and Phelps 1990), that Hispanic park users showed a preference for passive recreation, she found that to be the case for all other user groups as well. She also found that Hispanic park users were the most likely to actively appropriate and modify park space, for example, by bringing items from home. She found that Hispanic park users tended to visit parks as family groups; African American park users tended to visit parks as peer groups; Caucasian park users tended to visit parks alone; and Asian residents were least likely to visit parks, even in a predominantly Asian neighborhood. Interviews with local elderly Asian residents (Chinese immigrants) suggested that a lack of interest in American parks was rooted in perceptions of the ideal park as “an aesthetic element of gorgeous design,” leaving them unimpressed with poorly landscaped American parks emphasizing recreational functions. 2.2 Defining and measuring park accessibility “Accessibility” is an abstract concept that describes how easily an individual can accomplish an activity at a particular space. Though not strictly quantifiable, the idea of quantifying this access is tempting and has been frequently attempted. Handy and Niemeier (1997) identify three broad types of accessibility measures: cumulative opportunity or isochrone measures, gravity-based measures, and utility-based measures. Dong et al. (2006) follow the same basic classification approach as Handy and Neimeier, illustrating mathematically how the three different types of measures can be collapsed into each other. Geurs and van Wee (2004) group cumulative opportunity and gravity-based measures into a single category that they refer to as location-based measures. In this, Geurs et al. rely on the distinction that utility-based measures incorporate revealed preferences of individuals for particular destinations while location-based measures are entirely geo-spatial in their definition. 2.2.1 Location-based measures of park accessibility Cumulative opportunity measures are calculated by counting the number of origins or destinations within a threshold travel cost of a location (where cost might be some combination of distance, travel time, and/or monetary cost of travel). A strength of cumulative opportunity measures lies in their simplicity and intuitive interpretation. However, they may be too simple, especially with regard to trip costs near the threshold. An example of a cumulative opportunity measure might be the number of parks within a ten-minute walk of a person’s home, or the number of households living within ten minutes of a park. This measure would imply that a household living immediately adjacent to a park has the same access to it as one that lives nine minutes away, but that a household living eleven minutes away has no access to it. ParkScore (Trust for Public Land 2019), developed by the Trust for Public Land, is a popular measure of park accessibility that starts from a cumulative opportunity measure (the share of the population that resides within a 10-minute walk of a green space) and adjusts this value based on the total city green space, investment, and amenities weighted against the socioeconomic characteristics of the population outside of the 10-minute walk threshold. The resulting score is a convenient quantitative tool in estimating the relative quality of green space access across cities (Rigolon, Browning, and Jennings 2018). ParkScore may be less useful at identifying the comparative quality of access within a city, particularly since the vast majority of residents in dense areas like San Francisco (100%) and New York City (99%) may live within the binary 10-minute walk threshold. The Centers for Disease Control and Prevention (CDC) has developed an “Accessibility to Parks Indicator” along similar lines (Ussery et al. 2016), calculating the share of the population living within a half-mile of a park for each county in the U.S. Gravity-based accessibility measures take a similar approach to cumulative opportunity measures, but theoretically include all possible destinations and weight them according to the travel cost that they impose, based on an impedance function (often a negative exponential calibrated to observed trip distributions). Cumulative opportunity measures may be considered a special case of gravity-based measures, where the impedance function takes the form of a binary step function that equals zero after a cutoff travel cost (which is why Geurs and van Wee (2004) classify them both as location-based). A major advantage of gravity-based accessibility measures lies in their consistency with travel behavior theory: Gravity-based measures have their roots in the trip distribution step of the traditional four-step travel demand forecasting method, where trips originating in a particular zone are distributed among destination zones, proportionate to each zone’s gravity-based accessibility. Urban scholars have used gravity-based measures to explore the spatial distribution of park access across Tainan City, Taiwan (Chang and Liao 2011) and to estimate the relationship between park access and housing prices in Shenzhen, China (Wu et al. 2017). Some scholars have used location-based measures of park accessibility to evaluate equity in park access. Chang and Liao (2011) use a gravity-based measure to determine that low-income neighborhoods have less access to parks than higher-income neighborhoods in Tainan City, Taiwan. Bruton and Floyd (2014) conduct a neighborhood-level analysis of park amenities in Greensboro, North Carolina, and find that low-income neighborhoods tend to have parks with more picnic areas, more trash cans, and fewer wooded areas, but they do not address the question of the extent to which different populations might value these different amenities. Kabisch and Haase (2014) find that neighborhoods in Berlin with high immigrant populations and older populations likewise had less access to parks, and they pair these findings with survey results suggesting that these disparities are not consistent with the preferences expressed by those populations. 2.2.2 Utility-based measures of park accessibility While traditional four-step travel demand models distribute zonal trips based on a gravity-based accessibility model, the travel demand modeling profession has shifted more recently towards a destination choice framework that distributes trips based on discrete-choice regression models. D. McFadden (1974) first applied discrete choice models to urban travel demand to predict mode choice, and modern disaggregate activity-based models apply them to all travel behavior choices, including to select among alternative routes or alternative destinations (Dios Ortúzar and Willumsen 2011). Though the application of random utility models to destination choice is not new (see Anas 1983), the increasing availability of computing resources makes estimating and applying discrete choice models on large alternative sets in a practical context more feasible. Destination choice models estimate the probability of selecting a particular destination among a set of alternatives based on the relative attractiveness, or utility, of each alternative. Utility may be function of distance or travel time alone (in which case, a utility-based accessibility measure might be quite similar to a location-based measure), but the function can also incorporate other destination characteristics that lead one destination to be more highly-utilized than another. For a utility-based measure of park accessibility, these might include park size, cleanliness, or the availability of particular amenities. The degree to which these park and trip attributes influence the destination utility can be estimated statistically using survey data. Though destination choice utility models have not commonly been used to measure park accessibility, scholars have acknowledged that park accessibility metrics should be linked with park use, since a park that has many visitors must by definition be accessible to those visitors. McCormack et al. (2010) provide a comprehensive review of this literature; it is sufficient here to note that most studies find park use to depend on a complicated interplay between park size, maintenance, facilities, and travel distance. Many of these attributes are incorporated into ParkIndex (Kaczynski et al. 2016), which estimates the resident park use potential within small grid cells by applying utility preference coefficients estimated from a survey in Kansas City. There are limited examples of researchers using a destination choice model to predict recreation attractions. Kinnell et al. (2006) apply a choice model to a survey of park visitors in New Jersey, and estimate the relative attractiveness of park attributes including playgrounds, picnic areas, and park acreage weighed against the travel disutility and the relative crime rate at the destination. In a similar study, Meyerhoff, Dehnhardt, and Hartje (2010) model the urban swimming location choice for a surveyed sample. In both studies, the researchers were attempting to ascertain which attributes of a recreation generated the most positive utility, and therefore which attributes should be prioritized for improvement. Though neither was attempting to understand relative park accessibility, Macfarlane et al. (2020) applied the Kinnell et al. (2006) estimates in an exploration of utility-based park accessibility and its relationship to aggregate health outcomes. One primary obstacle to estimating discrete-choice models on the park destination problem has been the lack of sufficiently detailed, trip-level data on park users. Most destination choice models in practice are estimated from household travel surveys that must focus on all trip purposes, and necessarily group multiple recreation and social trips together (National Academies of Sciences Engineering and Medicine 2012). However, the advent of large-scale mobile device networks and the perpetual association of unique devices with unique users has given researchers a new opportunity to observe the movements and activity location patterns for large subsets of the population (Naboulsi et al. 2016). Such passively collected location data — sometimes referred to as “Big Data” — is a by-product of other systems including cellular call data records (e.g., Bolla and Davoli 2000; Calabrese et al. 2011), probe GPS data (Huang and Levinson 2015), and more recently Location Based Services (LBS) (Roll 2019; Komanduri et al. 2017). LBS use a network of mobile applications that obtain the users’ physical location at different points in the day. Commercial vendors repackage, clean, and scale these data to population or traffic targets and provide origin-destination flows to researchers and practitioners. Monz et al. (2019), for example, demonstrate that passive device data can accurately estimate trip flows to natural recreation areas. A number of methods have been proposed to develop destination choice information from these passive data. Bernardin et al. (2018) employs a passive origin-destination matrix as a shadow price reference in an activity-based location choice model, iteratively adjusting the calibration parameters of the choice utilities to minimize the observed error between the passive data and the modeled predictions. Kressner (2017) use the passive flow data as a probabilistic sampling frame to recreate individual trips through simulation A similar method developed by Zhu and Ye (2018) uses the passive dataset directly, sampling 10,000 random trips from GPS traces of taxi trips in Shanghai and estimating a destination choice model. Employing the passive data set in this way provides the authors an opportunity to examine the choices of a large sample of a small population (taxi passengers). The Zhu and Ye (2018) methodology could be extended to other situations where collecting a statistically relevant survey sample would be prohibitively difficult, but where passive device location data reveals which destinations people choose among many observable options. 2.3 Street Conversion Equity Analysis [placeholder for literature on COVID shifting streets - will draw heavily from Tab Combs’ working paper. This could also go in the intro?] The definition of an urban park is not well-established, though some might echo Justice Potter Stewart in arguing that we know one when we see one (“Jacobellis v. Ohio” 1964). If we define an urban park as a public space that is designated for the purpose of recreation, exercise, and social gathering, then the rapid reallocation of street space that occurred in response to the global COVID-19 pandemic in 2020 could be characterized as a proliferation of small urban parks. Of course, these spaces do not have the amenities or general character of most parks, and classifying them as equivalent to their greener peers in an accessibility analysis would be erroneous for many reasons. But a utility-based accessibility framework would allow us to discount these street parks for the amenities they lack while also considering the benefits proffered by their availability and proximity. Further, we can model these tradeoffs with statistical weights determinable through observing park trip distribution patterns revealed through passive mobile device data. "],
["methodology.html", " 3 Methodology 3.1 Data 3.2 Model", " 3 Methodology We constructed a dataset on which to estimate park activity location choices for a sample of observed trips in Alameda County, California. Alameda County is one of the seven counties that constitutes the San Francisco Bay Area metropolitan region in California. Alameda is the seventh most populous county in California with a population of 1.5 million (U.S. Census Bureau 2019), and has 14 incorporated cities and several unincorporated communities. It is an economically and ethnically diverse county and hence it was an attractive area to use for this study. The racial makeup of Alameda County was (49.7%) White, (11.2%) African American, (1.0%) Native American, (38.7%) Asian, (1.0%) Pacific Islander, and (22.4% Hispanic or Latino (of any race). Alameda County has a diverse set of parks, ranging from local small community parks, urban and transit-accessible parks like the Lake Merritt Recreational area, accessible coastal access, and suburban recreational areas like Lake Chabot. 3.1 Data We constructed an analysis dataset from a publicly-available parks polygons layer, a commercially acquired passive device origin-destination table representing trips between the parks and home block groups, and American Community Survey data for the home block groups. We obtained a polygons shapefile layer representing open spaces in Alameda County, California from the California Protected Areas Database (GreenInfo Network 2019). This dataset was selected because it included multiple different types of open space including local and state parks, traditional green spaces as well as wildlife refuges and other facilities that can be used for recreation. We removed facilities that did not allow open access to the public (such as the Oakland Zoo) and facilities whose boundaries conflated with freeway right-of-way – this prevents trips through the park from being conflated with park trips in the passive origin-destination data. not_parks &lt;- c(&quot;3455&quot;, &quot;15886&quot;, &quot;13243&quot;) parks &lt;- st_read(here(&quot;data/bayarea_parks.geojson&quot;), quiet = TRUE) %&gt;% filter(COUNTY == &quot;Alameda&quot;) %&gt;% transmute( id = as.character(UNIT_ID), name = UNIT_NAME, access = factor(ACCESS_TYP, levels = c(&quot;Open Access&quot;, &quot;No Public Access&quot;, &quot;Restricted Access&quot;)), acres = ACRES, type = DES_TP) %&gt;% filter(!id %in% not_parks) %&gt;% filter(access == &quot;Open Access&quot;) %&gt;% select(id, access, acres, type) %&gt;% st_transform(this_crs) From this initial parks polygons dataset, we obtained park attribute information through OpenStreetMap (OSM) using the osmdata package for R (Padgham et al. 2017). Three attribute elements are considered in this analysis. First, we identify playgrounds using OSM facilities given a leisure = playground tag. The tagged facilities can be either polygon or point objects; in the former case we use the polygon centroid to determine the location of the playground. playground_osm &lt;- opq(bb) %&gt;% # specify boundary for query add_osm_feature(key = &quot;leisure&quot;, value = &quot;playground&quot;) %&gt;% # specify which kinds of data we want osmdata_sf() %&gt;% # get a list of sf data frames for these tags trim_osmdata(bb, exclude = TRUE) playgrounds &lt;- rbind( # convert polygons to centroids playground_osm$osm_polygons %&gt;% st_transform(this_crs) %&gt;% st_centroid() %&gt;% select(osm_id), # get points playground_osm$osm_points %&gt;% st_transform(this_crs) %&gt;% select(osm_id) # no multipolygons or polylines that need to be included ) %&gt;% mutate(playground = TRUE) Second, we consider sport fields of various kinds identified with the OSM leisure = pitch tag. This tag has an additional attribute describing the sport the field is designed for, which we retain in a consolidated manner. Soccer and American football fields are considered in a single category, and baseball and softball fields are combined as well. Basketball, tennis, and volleyball courts are kept as distinct categories, with all other sport-specific fields combined into a single “other.” Golf courses are discarded. As with playgrounds, polygon field and court objects are converted into points at the polygon centroid. pitches_osm &lt;- opq(bb) %&gt;% # specify boundary for query add_osm_feature(key = &quot;leisure&quot;, value = &quot;pitch&quot;) %&gt;% osmdata_sf() %&gt;% trim_osmdata(bb, exclude = TRUE) pitches &lt;- rbind( # convert polygons to centroids pitches_osm$osm_polygons %&gt;% st_transform(this_crs) %&gt;% st_centroid() %&gt;% select(osm_id, sport), # get points pitches_osm$osm_points %&gt;% st_transform(this_crs) %&gt;% select(osm_id, sport) # no multipolygons or polylines that need to be included ) %&gt;% filter(sport != &quot;golf&quot;) %&gt;% mutate( sport = case_when( grepl(&quot;football&quot;, sport) | grepl(&quot;soccer&quot;, sport) ~ &quot;football / soccer&quot;, grepl(&quot;baseball&quot;, sport) | grepl(&quot;softball&quot;, sport) ~ &quot;baseball&quot;, grepl(&quot;basketball&quot;, sport) ~ &quot;basketball&quot;, grepl(&quot;tennis&quot;, sport) ~ &quot;tennis&quot;, grepl(&quot;volleyball&quot;, sport) ~ &quot;volleyball&quot;, TRUE ~ &quot;other_pitch&quot; ) ) Finally, we identified trails and footpaths using the path, cycleway, and footway values of the highway tag. A visual inspection of the resulting data revealed that the large preponderance of sidewalks and cycling trails within parks in Alameda County are identified properly with these variables. Trails are represented in OSM as polylines, or as polygons if they form a complete circle. In the latter case, we converted the polygon boundary into an explicit polyline object. trails_osm &lt;- opq(bb) %&gt;% # specify boundary for query add_osm_feature(key = &quot;highway&quot;, value = c(&quot;footway&quot;, &quot;cycleway&quot;, &quot;path&quot;)) %&gt;% osmdata_sf() %&gt;% trim_osmdata(bb, exclude = FALSE) ## Request failed [429]. Retrying in 1 seconds... trails &lt;- rbind( # points are nodes, so we can skip them. # lines trails_osm$osm_lines %&gt;% st_transform(this_crs) %&gt;% select(osm_id, bicycle, foot, horse), # circular paths get converted to polygons, so we need to # turn them back into lines. trails_osm$osm_polygons %&gt;% st_transform(this_crs) %&gt;% st_boundary() %&gt;% select(osm_id, bicycle, foot, horse) ) %&gt;% mutate(length = st_length(.)) It is possible for each of these facilities to exist outside the context of a public park. For example, many private apartment complexes have playgrounds and high schools will have sports facilities that are not necessarily open to the general public. We spatially matched the OSM amenities data and retained only those facilities that intersected with the CPAD open spaces database identified earlier. # Append attributes to park frame =============== parks_with_playgrounds &lt;- parks %&gt;% # compute yeo-johnson transformation on acres # determine if a playground point is inside the park polygon boundary st_join(playgrounds %&gt;% select(playground), st_intersects) %&gt;% # a park with multiple playgrounds will join multiple times, so we need to # summarize them back down. group_by(id) %&gt;% slice(1) %&gt;% ungroup() %&gt;% mutate(playground = ifelse(is.na(playground), F, playground)) %&gt;% select(id, playground) %&gt;% st_set_geometry(NULL) # determine if the pitch points are inside the park polygon boundaries parks_with_pitches &lt;- parks %&gt;% select(id) %&gt;% st_join(pitches %&gt;% select(sport)) %&gt;% st_set_geometry(NULL) %&gt;% # multiple pitches in a park result in repeated rows. group_by(id, sport) %&gt;% summarise(count = n()) %&gt;% pivot_wider(id_cols = id, values_from = count, names_from = sport, values_fill = FALSE) %&gt;% mutate( pitch = ifelse(`NA` == 1, FALSE, TRUE), across(baseball:tennis, ~ifelse(. &gt; 0, TRUE, FALSE)), ) %&gt;% select(-`NA`) # determine which walking paths are inside park polgon boundaries parks_with_trails &lt;- parks %&gt;% # determine if the trails are inside the park polygon boundaries st_join(trails %&gt;% select(trail = osm_id), st_intersects) %&gt;% # multiple pitches in a park result in repeated rows. group_by(id) %&gt;% slice(1) %&gt;% ungroup() %&gt;% mutate(trail = ifelse(is.na(trail), F, T)) %&gt;% select(id, trail) %&gt;% st_set_geometry(NULL) # join together and write out ================= attributed_parks &lt;- parks %&gt;% # compute yeo-johnson transformation on acres mutate(yj_acres = VGAM::yeo.johnson(acres, lambda = 0)) %&gt;% left_join(parks_with_playgrounds, by = &quot;id&quot;) %&gt;% left_join(parks_with_pitches, by = &quot;id&quot;) %&gt;% left_join(parks_with_trails, by = &quot;id&quot;) dj1 &lt;- wesanderson::wes_palette(&quot;Darjeeling1&quot;) if(knitr::is_latex_output()) { pbox &lt;- st_bbox(st_transform(parks, 4326)) alameda_back &lt;- get_map(c(lon = mean(pbox[c(1, 3)]), lat = mean(pbox[c(2, 4)]) ), zoom = 10, source = &quot;stamen&quot;, color = &quot;bw&quot;) alameda_back &lt;- ggmap_bbox(alameda_back) ggmap(alameda_back, extent = &quot;device&quot;) + coord_sf(crs = st_crs(3857), xlim = c(-122.29674 , -122.16358), ylim = c( 37.74098, 37.87028), expand = FALSE) + geom_sf(data = parks %&gt;% st_transform(3857), inherit.aes = FALSE, fill = dj1[2], lwd = 0) + theme(axis.line = element_line(color = NA)) + xlab(&quot;&quot;) + ylab(&quot;&quot;) } else { leaflet() %&gt;% addProviderTiles(providers$Esri.WorldGrayCanvas) %&gt;% addPolygons(data = parks %&gt;% st_transform(4326), group = &quot;Parks&quot;, color = dj1[2]) %&gt;% addCircleMarkers(data = playgrounds %&gt;% st_transform(4326), group = &quot;Playgrounds&quot;, color = dj1[3], radius = 2) %&gt;% addCircleMarkers(data = pitches %&gt;% st_transform(4326), group = &quot;Sport Fields&quot;, color = dj1[1], radius = 2) %&gt;% addPolylines(data = trails %&gt;% st_transform(4326), group = &quot;Trails&quot;, color = dj1[5]) %&gt;% addLayersControl(overlayGroups = c(&quot;Parks&quot;, &quot;Playgrounds&quot;, &quot;Sport Fields&quot;, &quot;Trails&quot;)) } Figure 3.1: Location of parks in Alameda County. We provided the park boundaries layer to a commercial firm, StreetLight Data Inc., which develops and resells origin-destination matrices derived from passive device location data. The provider employs a proprietary data processing engine (called Route Science) to algorithmically transform observed device location data points (the provider uses in-vehicle GPS units and mobile device LBS) over time into contextualized, normalized, and aggregated travel patterns. From these travel patterns, the Route Science processing algorithms infer likely home Census block group locations for composite groups of people and converts raw location data points into trip origin and destination points (Pan et al. 2006; Friedrich et al. 2010). park_flows &lt;- read_csv(here(&quot;data/Master_BlockGroups_Final071519.csv&quot;), col_types = cols()) %&gt;% # need to make block group id properly formatted. transmute( park = as.character(`Zone Name`), home = paste0(&quot;0&quot;, round(`Block Group ID`)), county = substr(home, 0, 5), attractions = `Zone Traffic (StL Index)`, d_share = `Percent by Home Location` ) %&gt;% # only keep bgs in the area filter(county %in% c(&quot;06001&quot;)) %&gt;% # and only keep parks that we are looking at filter(park %in% parks$id) %&gt;% mutate(flow = attractions * d_share) %&gt;% group_by(home) %&gt;% mutate( productions = sum(flow), o_share = flow / productions ) For each park polygon, the firm returned a population-weighted estimate of how many devices were observed by home location block group over several months in the period between May 2018 and October 2018. We transformed this table such that it represented the weighted unique devices traveling between block groups and parks. We discarded home location block groups outside of Alameda County; the imputed home locations can be far away from the study area for a small amount of trips and are unlikely to represent common or repeated park activities. attributed_parks &lt;- attributed_parks %&gt;% group_by(type) %&gt;% left_join(park_flows %&gt;% group_by(park) %&gt;% slice(1) %&gt;% select(park, attractions), by = c(&quot;id&quot; = &quot;park&quot;)) %&gt;% mutate(attractions = ifelse(is.na(attractions), 0, attractions)) write_rds(attributed_parks, &quot;data/attributed_parks.rds&quot;) Table 3.1 presents descriptive statistics on the 500 parks assembled for this study, grouped according to the park type as defined on CPAD. A little more than half of the parks have identified paths, while around 40% of the identified parks have playgrounds and sport fields. datasummary_balance( ~ Type, data = attributed_parks %&gt;% transmute(Access = access, Acres = acres, Type = ifelse(grepl(&quot;Recreation Area&quot;, type), &quot;Recreation Area&quot; ,type), Playground = playground, `Any Sport Field` = pitch, `Football / Soccer` = `football / soccer`, `Baseball` = baseball, `Basketball` = basketball, `Tennis` = tennis, `Volleyball` = volleyball, Trail = trail, `Mobile Devices` =attractions), dinm = FALSE, caption = &quot;Park Summary Statistics&quot;, booktabs = TRUE) Table 3.1: Park Summary Statistics Local Park (N=441) Recreation Area (N=59) Mean Std. Dev. Mean Std. Dev. Acres 59.8 370.5 125.6 505.1 Mobile Devices 1450.0 6685.4 2659.0 6161.0 N % N % type Local Park 441 88.2 0 0.0 Local Recreation Area 0 0.0 57 11.4 State Recreation Area 0 0.0 2 0.4 Access Open Access 441 88.2 59 11.8 No Public Access 0 0.0 0 0.0 Restricted Access 0 0.0 0 0.0 Playground FALSE 224 44.8 44 8.8 TRUE 217 43.4 15 3.0 Any Sport Field FALSE 276 55.2 39 7.8 TRUE 165 33.0 20 4.0 Football / Soccer FALSE 415 83.0 51 10.2 TRUE 26 5.2 8 1.6 Baseball FALSE 364 72.8 45 9.0 TRUE 77 15.4 14 2.8 Basketball FALSE 341 68.2 52 10.4 TRUE 100 20.0 7 1.4 Tennis FALSE 387 77.4 53 10.6 TRUE 54 10.8 6 1.2 Volleyball FALSE 434 86.8 57 11.4 TRUE 7 1.4 2 0.4 Trail FALSE 155 31.0 22 4.4 TRUE 286 57.2 37 7.4 In order to understand the demographic makeup of the home block groups and potentially the characteristics of the people who make each trip, we obtained 2013-2017 five-year data aggregations from the American Community Survey using the tidycensus (Walker 2019) interface to the Census API for several key demographic and built environment variables: the share of individuals by race, the share of households by income level, household median income, the share of households with children under 6 years old, and the household density. An important attribute of the choice model is the distance from the home block group to the park boundary. Because we have no information on where in the block group a home is actually located, we use the population-weighted block group centroid published by the Census Bureau as the location for all homes in the block group. We then measured the network-based distance between the park and the home block group centroid using a walk network derived from OpenStreetMap using the networkx package for Python (Hagberg, Schult, and Swart 2008), variables &lt;- c( &quot;population&quot; = &quot;B02001_001&quot;, # TOTAL: RACE &quot;housing_units&quot; = &quot;B25001_001&quot;, # HOUSING UNITS &quot;households&quot; = &quot;B19001_001&quot;, #HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017 INFLATION-ADJUSTED DOLLARS) # Hispanic or Latino Origin by Race &quot;white&quot; = &quot;B03002_003&quot;, &quot;black&quot; = &quot;B03002_004&quot;, &quot;asian&quot; = &quot;B03002_006&quot;, &quot;hispanic&quot; = &quot;B03002_012&quot;, #MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017 INFLATION-ADJUSTED DOLLARS) &quot;income&quot; = &quot;B19013_001&quot;, # FAMILY TYPE BY PRESENCE AND AGE OF RELATED CHILDREN &quot;children_c06&quot; = &quot;B11004_004&quot;, # married under 6 only &quot;children_c6+&quot; = &quot;B11004_005&quot;, # married under 6 and older &quot;children_m06&quot; = &quot;B11004_011&quot;, # male under 6 only &quot;children_m6+&quot; = &quot;B11004_012&quot;, # male under 6 and older &quot;children_f06&quot; = &quot;B11004_017&quot;, # female under 6 only &quot;children_f6+&quot; = &quot;B11004_018&quot;, # female under 6 and older #HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2017 INFLATION-ADJUSTED DOLLARS) &quot;inc_0010&quot; = &quot;B19001_002&quot;, &quot;inc_1015&quot; = &quot;B19001_003&quot;, &quot;inc_1520&quot; = &quot;B19001_004&quot;, &quot;inc_2025&quot; = &quot;B19001_005&quot;, &quot;inc_2530&quot; = &quot;B19001_006&quot;, &quot;inc_3035&quot; = &quot;B19001_007&quot;, &quot;inc_125&quot; = &quot;B19001_015&quot;, &quot;inc_150&quot; = &quot;B19001_016&quot;, &quot;inc_200&quot; = &quot;B19001_017&quot; ) acs &lt;- get_acs(geography = &quot;block group&quot;, variables = variables, year = 2017, state = &quot;CA&quot;, county = &quot;001&quot;, geometry = TRUE) %&gt;% select(-moe) %&gt;% spread(variable, estimate) %&gt;% # area is in m^2, change to km^2 mutate(area = as.numeric(st_area(geometry) * 1e-6)) %&gt;% transmute( geoid = GEOID, group = 1, population, households, housing_units, density = households / area, income, # many of the variables come in raw counts, but we want to consider # them as shares of a relevant denominator. children = 100 * ( children_c06 + `children_c6+` + children_m06 + `children_m6+` + children_f06 + `children_f6+`) / households, lowincome = 100 * (inc_0010 + inc_1015 + inc_1520 + inc_2530 + inc_3035) / households, highincome = 100 * (inc_125 + inc_150 + inc_200) / households, black = 100 * black / population, asian = 100 * asian / population, hispanic = 100 * hispanic / population, white = 100 * white / population ) %&gt;% filter(population &gt; 0) write_rds(acs, &quot;data/blockgroups.rds&quot;) # distances computed in py/shortest_paths.py shortest_path_dir &lt;- &quot;data/shortest_paths&quot; if(!dir.exists(shortest_path_dir)) { system2(&quot;7z&quot;, args = c(&quot;x&quot;, &quot;data/shortest_paths.7z&quot;, &quot;-odata/&quot;)) } path_files &lt;- dir(shortest_path_dir, full.names = TRUE) distance_df &lt;- lapply(path_files, function(file) { read_csv(file, col_types = list(geoid = col_character(), park_id = col_character())) %&gt;% mutate( yj_distance = VGAM::yeo.johnson(distance, lambda = 0), yj_euc_dist = VGAM::yeo.johnson(euc_dist, lambda = 0) ) }) %&gt;% bind_rows() %&gt;% rename(home = geoid, park = park_id) %&gt;% mutate(home = sprintf(&quot;%012s&quot;, home)) write_rds(distance_df, &quot;data/distances.rds&quot;) acs_for_table &lt;- acs %&gt;% select( &quot;Density: Households per square kilometer&quot; = density, &quot;Income: Median tract income&quot; = income, &quot;Low Income: Share of households making less than $35k&quot; = lowincome, &quot;High Income: Share of households making more than $125k&quot; = highincome, &quot;Children: Share of households with children under 6&quot; = children, &quot;Black: Share of population who is Black&quot; = black, &quot;Asian: Share of population who is Asian&quot; = asian, &quot;Hispanic: Share of population who is Hispanic&quot; = hispanic, &quot;White: Share of population who is White&quot; = white) datasummary_skim(acs_for_table, title = &quot;Block Group Summary Statistics&quot;, histogram = !knitr::is_latex_output()) %&gt;% kableExtra::column_spec(1, width = &quot;3cm&quot;) %&gt;% kableExtra::add_footnote(&quot;Hispanic indicates Hispanic individuals of all races; non-Hispanic individuals report a single race alone.&quot;) Table 3.2: Block Group Summary Statistics Unique (#) Missing (%) Mean SD Min Median Max Density: Households per square kilometer 1041 0 1709.6 1527.8 0.0 1350.1 19490.0 Income: Median tract income 971 3 93246.3 44900.3 9821.0 85673.0 250001.0 Low Income: Share of households making less than $35k 980 0 18.4 14.0 0.0 15.1 91.7 High Income: Share of households making more than $125k 1005 0 32.5 20.3 0.0 30.4 100.0 Children: Share of households with children under 6 985 0 15.1 9.0 0.0 14.0 62.7 Black: Share of population who is Black 926 0 11.8 14.1 0.0 6.4 81.4 Asian: Share of population who is Asian 1012 0 25.8 20.4 0.0 20.1 90.4 Hispanic: Share of population who is Hispanic 1020 0 22.3 18.9 0.0 15.7 85.4 White: Share of population who is White 1033 0 34.2 23.0 0.0 29.1 100.0 a Hispanic indicates Hispanic individuals of all races; non-Hispanic individuals report a single race alone. 3.2 Model In random utility choice theory, if an individual living in block group \\(n\\) wishes to make a park trip, the probability that the individual will choose park \\(i\\) from the set of all parks \\(J\\) can be described as a ratio of the park’s measurable utility \\(V_{ni}\\) to the sum of the utilities for all parks in the set. In the common destination choice framework we apply a multinomial logit model (D. L. McFadden 1974, @Recker1978), \\[\\begin{equation}\\label{eq:p} P_{ni} = \\frac{\\exp(V_{ni})}{\\sum_{j \\in J}\\exp(V_{nj})} \\end{equation}\\] where the measurable utility \\(V_{ni}\\) is a linear-in-parameters function of the destination attributes. \\[\\begin{equation}\\label{eq:V} V_{ni} = X\\beta \\end{equation}\\] where \\(\\beta\\) is a vector of estimable coefficients giving the relative utility (or disutility) of that attribute to the choice maker, all else equal. It is possible to add amenities of the park or the journey to the utility equation. However, as the number of alternatives is large, it is impractical to consider alternative-specific constants or coefficients and therefore not possible to include attributes of the home block group or traveler \\(n\\) directly. We can, however, segment the data and estimate different distance and size parameters for different segments to observe heterogeneity in the utility parameters between different socioeconomic groups. The logarithm of the sum in the denominator of Equation (called the logsum) provides a measure of the consumer surplus of the choice set (Williams 1977), \\[\\begin{equation} CS_n = \\ln{{\\sum_{j \\in J}\\exp(V_{nj})}} + C \\tag{3.1} \\end{equation}\\] where \\(C\\) is a constant indicating an unknown absolute value. But comparing the relative logsum values across choice makers, \\(CS_n - CS_{n-1}\\) gives an indication of which choice maker has a more valuable choice set. Or, in this case of a park destination choice model, which choice maker has better access to parks. Such a “utility-based” accessibility term is thus continuously defined, dervied directly from choice theory, and can contain multiple dimensions of the attributes of the choice (Handy and Niemeier 1997; Dong et al. 2006). set.seed(42) n_obs &lt;- 20000 n_alts &lt;- 10 n_flow &lt;- sum(park_flows$flow) ll0e &lt;- sum(n_obs *.8 * log(1/n_alts)) mydata &lt;- park_flows %&gt;% ungroup() %&gt;% mutate(weight = flow / sum(flow)) %&gt;% sample_n(n_obs, replace = TRUE, weight = weight) %&gt;% transmute(id = row_number(), home, alt_0 = park, validation = sample(c(TRUE,FALSE), n(), TRUE, prob = c(0.2, 0.8))) In the most typical cases, researchers estimate the utility coefficients for destination choice models from household travel surveys. As we have no knowledge of an appropriate survey on park access, we need to synthesize a suitable estimation data set. We do this by sampling 210^{4} random discrete device origin-destination pairs from the commercial passive data matrix, weighted by the volume of the flows. This corresponds to a 4.3% sample of all the observed device origin-destination pairs. The sampled origin-destination pair gives the home location as well as the “chosen” alternative for a synthetic person. In principle the individual’s choice set contains all the parks in our dataset; in practice it can be difficult to estimate choice models with so many alternatives (\\(|J| = 500\\)). For this reason we randomly sample 10 additional parks to serve as the non-chosen alternatives for our synthetic choice maker. Such random sampling of alternatives reduces the efficiency of the estimated coefficients but the coefficients remain unbiased (Train 2009). As the model has no alternative-specific constants, the standard likelihood comparison statistic against the market shares model \\(\\rho^2\\) is not computable. We instead use the likelihood comparison against the equal shares model \\(\\rho_0^2\\). sampled_parks &lt;- lapply(1:n_obs, function(i){ sample(attributed_parks$id, n_alts) }) %&gt;% unlist() %&gt;% matrix(ncol = n_alts) %&gt;% as_tibble(.name_repair = ~ str_c(&quot;alt&quot;, 1:n_alts, sep = &quot;_&quot;)) logitdata &lt;- mydata %&gt;% bind_cols(sampled_parks) %&gt;% gather(key = &quot;alt&quot;, value = &quot;park&quot;, -id, -home, -validation) %&gt;% mutate(chosen = alt == &quot;alt_0&quot;) %&gt;% arrange(id, alt) %&gt;% # append distances inner_join(distance_df, by = c(&quot;home&quot;, &quot;park&quot;)) %&gt;% # append park attributes left_join(attributed_parks, by = c(&quot;park&quot; = &quot;id&quot;)) %&gt;% # append block group attributes left_join(acs %&gt;% select(geoid, density:white) %&gt;% st_set_geometry(NULL), by = c(&quot;home&quot; = &quot;geoid&quot;) ) write_rds(logitdata, &quot;data/logitdata.rds&quot;) The resulting analysis dataset therefore contains 210^{4} choice makers that select between 11 parks including the park they were observed to choose; the measured distance between the choice maker’s block group and all parks in the choice set; and the acreage of each park in the choice set. We hold out a random sample of approximately 20% of choice makers for validation purposes. We use the mlogit package for R (Croissant 2019; R Core Team 2020) to estimate the multinomial logit models. "],
["results.html", " 4 Results 4.1 Model Application: Equity Analysis of COVID-19 Street Openings", " 4 Results library(tidyverse) library(mlogit) library(modelsummary) library(broom) library(kableExtra) library(sf) library(ggmap) library(leaflet) knitr::opts_chunk$set(cache = TRUE) # overloaded methods for doing prediction with mlogit objects source(&quot;R/methods.R&quot;) # function to index a tibble for mnl estimation logit_converter &lt;- function(df) { dfidx(df, idx = list(&quot;id&quot;, &quot;alt&quot;), shape = &quot;long&quot;, choice = &quot;chosen&quot;, idnames = &quot;id&quot;, drop.index = FALSE) } # function to estimate the mnl model on a subset of data group_mnl &lt;- function(df){ tryCatch({ mlogit(chosen ~ yj_distance + yj_acres + playground + baseball + basketball + `football / soccer` + other_pitch + volleyball + tennis + trail | -1, data = df) }, error = function(e){ warning(e, &quot;could not estimate mnl&quot;) return(NA) }) } this_map = c( &quot;yj_distance&quot; = &quot;log(Distance)&quot;, &quot;yj_acres&quot; = &quot;log(Acres)&quot;, &quot;playgroundTRUE&quot; = &quot;Playground&quot;, &quot;trailTRUE&quot; = &quot;Trail&quot;, &quot;pitchTRUE&quot; = &quot;Sport Field&quot;, &quot;basketballTRUE&quot; = &quot;Basketball&quot;, &quot;baseballTRUE&quot; = &quot;Baseball&quot;, &quot;`football / soccer`TRUE&quot; = &quot;Football / Soccer&quot;, &quot;tennisTRUE&quot; = &quot;Tennis&quot;, &quot;volleyballTRUE&quot; = &quot;Volleyball&quot;, &quot;other_pitchTRUE&quot; = &quot;Other Sport&quot; ) this_crs &lt;- 2227 # EPSG:2227 – NAD83 / California zone 3 (ftUS) logitdata &lt;- read_rds(&quot;data/logitdata.rds&quot;) dfi &lt;- logit_converter(logitdata) estim &lt;- filter(dfi, validation) valid &lt;- filter(dfi, !validation) We estimated multinomial logit park activity location choice models including coefficients for the distance between the park and the home block group and the acreage of the park. We applied a Yeo-Johnson transformation (Yeo and Johnson 2000) to both distance and acreage; the Yeo-Johnson transformation replicates the constant marginal elasticity of a logarithmic transformation while avoiding undefined values (\\(YJ(0) = 0\\)). For simplicity, we call this transformation log() in the model results tables. Using a constant marginal elasticity is better reflective of how people perceive distances and sizes; a one-mile increase to a trip distance is more impactful to a one-mile trip than a ten-mile trip. base_models &lt;- list( &quot;Network Distance&quot; = mlogit( chosen ~ yj_distance + yj_acres | -1 , data = estim), &quot;Park Attributes&quot; = mlogit( chosen ~ yj_distance + yj_acres + playground + trail + pitch | -1 , data = estim), &quot;Sport Detail&quot; = mlogit( chosen ~ yj_distance + yj_acres + playground + baseball + basketball + `football / soccer` + other_pitch + volleyball + tennis + trail | -1 , data = estim) ) detail_lrt &lt;- lrtest(base_models[[2]], base_models[[3]])$`Pr(&gt;Chisq)`[2] d_ratio_base &lt;- -1 * coefficients(base_models$`Network Distance`)[1] / coefficients(base_models$`Network Distance`)[2] d_ratio_sport &lt;- -1 * coefficients(base_models$`Sport Detail`)[1] / coefficients(base_models$`Sport Detail`)[2] Table 4.1 presents the model estimation results for a series of models with different utility function definitions, each estimated on the complete set of synthetic choice makers. The first model — named “Network Distance” — only considers the distance to the park and the size of the park in the utility equation. The estimated coefficients are significant and of the expected sign: That is, individuals will travel further distances to reach larger parks. The ratio of the estimated coefficients implies that on average, people will travel 3.3089752 times further to reach a park twice as large. The second and third models in Table 4.1 include a vector of park attributes. In the model labeled “Park Attributes,” the presence of any sport field is considered with a single dummy value, and in the “Sport Detail” model this variable is disaggregated into facilities for different sports. The value of the size and distance coefficients change modestly from the “Network Distance” model, with the implied size to distance trade-off rising to 3.3089752. Examining the two amenities models — independently and in comparison with each other — reveals a few surprising findings. First, it appears that playgrounds and sport fields in general contribute negatively to the choice utility equation. This is both unintuitive and contradictory to previous findings in this space (e.g., Kinnell et al. 2006). Considering different sports separately, there is a wide variety of observed response with tennis and volleyball facilities attracting more trips, and football and basketball facilities attracting fewer, all else equal. Trails and walking paths give substantive positive utility in both models. The difference in likelihood statistics between the three models is significant (likelihood ratio test \\(p\\)-value 3.598963310^{-4}), and so in spite of the curious aggregate findings, we move forward with this utility specification. modelsummary( base_models, stars = TRUE, output = &quot;kableExtra&quot;, coef_map = this_map, gof_omit = &quot;BIC&quot;, title = &quot;Estimated Model Coefficients&quot; ) %&gt;% scroll_box(width = &quot;100%&quot;, box_css = &quot;border: 0px;&quot;) Table 4.1: Estimated Model Coefficients Network Distance Park Attributes Sport Detail log(Distance) -1.354*** -1.394*** -1.390*** (0.022) (0.022) (0.022) log(Acres) 0.409*** 0.353*** 0.348*** (0.011) (0.012) (0.012) Playground -0.437*** -0.551*** (0.049) (0.049) Trail 0.555*** 0.563*** (0.052) (0.053) Sport Field -0.324*** (0.050) Basketball -0.237*** (0.068) Baseball 0.075 (0.067) Football / Soccer -0.490*** (0.095) Tennis 0.231*** (0.066) Volleyball 0.607*** (0.135) Other Sport -0.150* (0.087) Num.Obs. 3971 3971 3971 AIC 11600.2 11306.5 11293.6 Log.Lik. -5798.103 -5648.236 -5636.809 rho2 rho20 0.391 0.407 0.408 * p &lt; 0.1, ** p &lt; 0.05, *** p &lt; 0.01 minority_models &lt;- estim %&gt;% mutate(group = case_when( black &gt; 30 ~ &quot;black&quot;, asian &gt; 30 ~ &quot;asian&quot;, hispanic &gt; 30 ~ &quot;hispanic&quot;, TRUE ~ &quot;other&quot; )) %&gt;% filter(!is.na(group)) %&gt;% group_by(group) %&gt;% nest() %&gt;% ungroup() %&gt;% mutate( data = map(data, logit_converter), mnl = map(data, group_mnl) ) income_models &lt;- estim %&gt;% mutate(group = case_when(lowincome &gt; 30 ~ &quot;lowincome&quot;, highincome &gt; 50 ~ &quot;highincome&quot;, TRUE ~ &quot;other&quot;)) %&gt;% filter(!is.na(group)) %&gt;% group_by(group) %&gt;% nest() %&gt;% ungroup() %&gt;% mutate( data = map(data, logit_converter), mnl = map(data, group_mnl) ) child_models &lt;- estim %&gt;% mutate(group = case_when(children &gt; 25 ~ &quot;children&quot;, children &lt; 5 ~ &quot;few children&quot;, TRUE ~ &quot;other&quot;)) %&gt;% filter(!is.na(group)) %&gt;% group_by(group) %&gt;% nest() %&gt;% ungroup() %&gt;% mutate( data = map(data, logit_converter), mnl = map(data, group_mnl) ) models &lt;- list( &quot;&gt; 30% Asian&quot; = minority_models$mnl[[1]], &quot;&gt; 30% Black&quot; = minority_models$mnl[[4]], &quot;&gt; 30% Hispanic&quot; = minority_models$mnl[[3]], &quot;Other&quot; = minority_models$mnl[[2]], &quot;&gt; 30% Low income&quot; = income_models$mnl[[1]], &quot;&gt; 50% High income&quot; = income_models$mnl[[3]], &quot;Other&quot; = income_models$mnl[[2]], &quot;&gt; 25% children&quot; = child_models$mnl[[3]], &quot;&lt; 5% children&quot; = child_models$mnl[[2]], &quot;Other&quot; = child_models$mnl[[1]] ) It is worth investigating the heterogeneity in preferences that exist among different demographic groups. Though the income and ethnicity of the synthetic park visitors is not known, we can segment the estimation dataset based on the socioeconomic makeup of the visitors’ residence block group. The models presented in Table 4.2 were estimated on segments developed in this manner. Models under the “Minority” heading include a race-based segmentation: simulated individuals living in block groups with more than thirty percent Black persons are included in the “&gt;30% Black” model, an analogous segmentation for block groups with high Asian populations are in the “&gt;30% Asian” model, and the “Other” model contains all other block groups. Another set of model segmentation relies on the share of the population in each block group with household incomes above or below certain thresholds. Again, we use the threshold definitions based on in 3.2. modelsummary( models, stars = TRUE, output = &quot;kableExtra&quot;, coef_map = this_map, gof_omit = &quot;BIC&quot;, title = &quot;Estimated Model Coefficients with Block Group Segmentations&quot; ) %&gt;% add_header_above(c(&quot; &quot; = 1, &quot;Minority&quot; = 4, &quot;Income&quot; = 3, &quot;Children&quot; = 3)) %&gt;% scroll_box(width = &quot;100%&quot;, box_css = &quot;border: 0px;&quot;) %&gt;% landscape() %&gt;% kable_styling(latex_options = c(&quot;striped&quot;, &quot;scale_down&quot;)) Table 4.2: Estimated Model Coefficients with Block Group Segmentations Minority Income Children &gt; 30% Asian &gt; 30% Black &gt; 30% Hispanic Other &gt; 30% Low income &gt; 50% High income Other &gt; 25% children &lt; 5% children Other log(Distance) -1.325*** -1.524*** -1.277*** -1.428*** -1.419*** -1.309*** -1.394*** -1.236*** -1.594*** -1.398*** (0.038) (0.064) (0.050) (0.040) (0.051) (0.051) (0.029) (0.059) (0.083) (0.026) log(Acres) 0.372*** 0.311*** 0.337*** 0.351*** 0.338*** 0.342*** 0.354*** 0.313*** 0.372*** 0.356*** (0.020) (0.034) (0.026) (0.022) (0.027) (0.028) (0.015) (0.030) (0.044) (0.014) Playground -0.516*** -0.389*** -0.308*** -0.880*** -0.515*** -0.499*** -0.585*** -0.431*** -0.879*** -0.540*** (0.085) (0.124) (0.106) (0.094) (0.104) (0.123) (0.063) (0.124) (0.180) (0.057) Trail 0.655*** 0.361*** 0.269** 0.939*** 0.306*** 0.896*** 0.612*** 0.122 0.744*** 0.638*** (0.095) (0.130) (0.110) (0.106) (0.109) (0.148) (0.068) (0.126) (0.190) (0.062) Basketball -0.009 -0.305 -0.458*** -0.413*** -0.187 -0.109 -0.300*** -0.316* -0.301 -0.215*** (0.110) (0.187) (0.153) (0.136) (0.153) (0.160) (0.088) (0.172) (0.262) (0.078) Baseball 0.126 0.151 0.090 -0.066 0.054 -0.108 0.139 0.127 -0.038 0.085 (0.112) (0.176) (0.144) (0.131) (0.145) (0.165) (0.085) (0.168) (0.256) (0.076) Football / Soccer -0.495*** -1.014*** -0.247 -0.465** -0.886*** -0.263 -0.451*** -0.163 -0.964*** -0.538*** (0.154) (0.285) (0.205) (0.184) (0.226) (0.223) (0.120) (0.228) (0.357) (0.110) Tennis 0.394*** -0.557*** 0.114 0.452*** -0.096 0.659*** 0.201** 0.348** -0.059 0.229*** (0.109) (0.214) (0.154) (0.121) (0.163) (0.146) (0.085) (0.163) (0.264) (0.076) Volleyball 0.702*** -0.077 0.698** 0.299 0.433 0.446* 0.593*** 0.549* 0.424 0.610*** (0.197) (0.616) (0.313) (0.286) (0.403) (0.257) (0.177) (0.329) (0.538) (0.154) Other Sport -0.036 -0.201 -0.417* -0.125 -0.495** 0.010 -0.133 0.268 -0.417 -0.223** (0.141) (0.253) (0.216) (0.156) (0.222) (0.184) (0.112) (0.212) (0.334) (0.100) Num.Obs. 1355 561 743 1312 777 758 2436 544 358 3069 AIC 3916.9 1675.3 2444.7 3182.5 2396.3 1908.9 6975.0 1810.6 895.4 8574.4 Log.Lik. -1948.473 -827.668 -1212.336 -1581.241 -1188.142 -944.432 -3477.497 -895.280 -437.678 -4277.200 rho2 rho20 0.400 0.385 0.320 0.497 0.362 0.480 0.405 0.314 0.490 0.419 * p &lt; 0.1, ** p &lt; 0.05, *** p &lt; 0.01 The model estimates in Table 4.2 reveal that there is noticeable heterogeneity in the response among different socioeconomic groups. Park visitors living in block groups with a high proportion of Black and low-income residents show less affinity for trails and other walkways, but appear are also considerably to be more sensitive to the distance of a park. Visitors living in high-income neighborhoods are more attracted to the amenities of a park, or rather these visitors do not show significant negative coefficients for amenities, e.g. basketball courts and football fields. # write a function to estimate multiple MNL models on different # segments of the estimation data estimate_split_models &lt;- function(data, var, splits) { lapply(splits, function(p){ data %&gt;% filter(.data[[var]] &gt; p) %&gt;% tibble() %&gt;% mutate(share = p) }) %&gt;% bind_rows() %&gt;% group_by(share) %&gt;% nest() %&gt;% mutate( data = map(data, logit_converter), mnl = map(data, group_mnl), coef = map(mnl, tidy) ) } splits &lt;- c(0, 5, 10, 15, 20, 30, 40) split_models &lt;- lapply(c(&quot;black&quot;, &quot;asian&quot;, &quot;lowincome&quot;, &quot;highincome&quot;, &quot;children&quot;), function(var) { estimate_split_models(estim, var, splits) %&gt;% mutate(Segmentation = var) }) %&gt;% bind_rows() Seeing that there is a difference in the response in the model segmentation, it is also worth considering the role of our segmentation thresholds in these findings. Figure 4.1 shows the estimated coefficients and confidence intervals for these different amenities at different threshold levels of segmentation. The threshold level means that at least that percent of the block group’s population falls in that category. The confidence intervals widen as more observations are excluded from the model. The estimated coefficients for the different segmentations are identical when the share equals zero, and simply represent the “Sport Detail” model from Table 4.1. Overall, increasing the segmentation threshold level reveals some additional information about user preferences. First, it should be noted that there is some inconsistency: for instance, block groups with at least 40% of low income households show a lower importance of distance than block groups with either 30% or 50% low income households. The increasing width of the confidence interval, however, means it is difficult to make generalized statements. Residents of block groups with a higher share of Asian or high income households both show relatively more affinity for tennis courts and trails. Block groups with high Black populations show a somewhat greater preference for playgrounds, as well appearing to be the most distance-sensitive group. # extract the coefficients you need to plot dat &lt;- modelplot(split_models$mnl %&gt;% setNames(str_c(split_models$Segmentation, split_models$share, sep = &quot;_&quot;)), coef_map = this_map, draw = FALSE) %&gt;% separate(model, into = c(&quot;Segmentation&quot;, &quot;share&quot;), convert = TRUE, sep = &quot;_&quot;) %&gt;% mutate( Segmentation = case_when( Segmentation == &quot;black&quot; ~ &quot;Black&quot;, Segmentation == &quot;asian&quot; ~ &quot;Asian&quot;, Segmentation == &quot;lowincome&quot; ~ &quot;Income &lt; $35k&quot;, Segmentation == &quot;highincome&quot; ~ &quot;Income &gt; $125k&quot;, Segmentation == &quot;children&quot; ~ &quot;Children under 6&quot; ) ) # make the plot these_colors &lt;- wesanderson::wes_palettes$Darjeeling1 split_plots &lt;- ggplot(dat, aes(x = share, y = estimate, ymin = conf.low, ymax = conf.high, color = Segmentation, fill = Segmentation)) + theme_minimal() + geom_line() + geom_ribbon(alpha = 0.05, size = 0.1, lty = &quot;dotted&quot;) + facet_wrap(~ fct_rev(term), scales = &quot;free_y&quot;, ncol = 3) + scale_color_manual(values = these_colors) + scale_fill_manual(values = these_colors) + xlab(&quot;Percent of Block Group Population&quot;) + ylab(&quot;Estimated coefficient and 95% confidence interval&quot;) if(knitr::is_latex_output()) { lemon::reposition_legend(split_plots, position = &#39;top left&#39;, panel = &quot;panel-3-4&quot;) } else { plotly::ggplotly(split_plots) } ## Warning: `group_by_()` is deprecated as of dplyr 0.7.0. ## Please use `group_by()` instead. ## See vignette(&#39;programming&#39;) for more help ## This warning is displayed once every 8 hours. ## Call `lifecycle::last_warnings()` to see where this warning was generated. Figure 4.1: Estimated utility coefficients and 95% confidence intervals for park amenities at different socioeconomic threshold levels. 4.1 Model Application: Equity Analysis of COVID-19 Street Openings In spring and summer 2020, cities across the world responded to the COVID-19 pandemic by converting city streets into temporary pedestrian plazas. The stated goals of this policy included providing recreational space that would allow people to walk and exercise outside with sufficient personal space and less risk of conflict from vehicle traffic. This policy created several dozen temporary open spaces in urbanized areas of the county. In this section, we apply the models estimated above to evaluate the benefits of this policy in terms of aggregate value, as well as the equity of the policy with respect to different income and ethnic groups. attributed_parks &lt;- read_rds(&quot;data/attributed_parks.rds&quot;) slowstreets &lt;- st_read(&quot;data/slow_streets.geojson&quot;, quiet = TRUE) %&gt;% st_transform(this_crs) street_parks &lt;- slowstreets %&gt;% st_buffer(dist = 25) %&gt;% # 50 foot wide park ( 4 lanes of traffic) mutate(acres = as.numeric(st_area(.)) / 43560) %&gt;% mutate() %&gt;% transmute( id = str_c(&quot;st&quot;, ID), access = &quot;Open Access&quot;, acres, type = &quot;Street&quot;, yj_acres = VGAM::yeo.johnson(acres, lambda = 0), playground = FALSE, baseball = FALSE, basketball = FALSE, `football / soccer` = FALSE, other_pitch = FALSE, volleyball = FALSE, tennis = FALSE, pitch = FALSE, trail = TRUE, attractions = NA ) We obtained the list of streets in Alameda County that were reported closed in the “Shifting Streets” COVID-19 mobility dataset (Combs et al. 2020). This dataset reports that 74 individual streets were closed to vehicle traffic (and thereby opened as public spaces); these streets represent 27.5730459 total miles across the cities of Berkeley, Oakland, and Alameda. For the purposes of this analysis, we represent each opened street as a single “park” without any sport facilities or playgrounds, but with a trail / walking path. The database provides the opened streets as polyline objects; we assert a 25-foot buffer around the line to represent a polygon with a measurable area. Finally, we measure the network-based distance from each population-weighted block group centroid to the nearest boundary of each new open space facility created by this policy. # distances computed in py/shortest_paths.py shortest_path_dir &lt;- &quot;data/shortest_paths_street&quot; if(!dir.exists(shortest_path_dir)) { system2(&quot;7z&quot;, args = c(&quot;x&quot;, &quot;data/shortest_paths_street.7z&quot;, &quot;-odata/&quot;)) } path_files &lt;- dir(&quot;data/shortest_paths_street/&quot;, full.names = TRUE) street_distances &lt;- lapply(path_files, function(file) { read_csv(file, col_types = list(geoid = col_character(), park_id = col_character())) %&gt;% mutate( yj_distance = VGAM::yeo.johnson(distance, lambda = 0), yj_euc_dist = VGAM::yeo.johnson(euc_dist, lambda = 0) ) }) %&gt;% bind_rows() %&gt;% rename(home = geoid, park = park_id) %&gt;% mutate(home = sprintf(&quot;%012s&quot;, home)) # read data on streets and distances distance_df &lt;- read_rds(&quot;data/distances.rds&quot;) attributed_parks &lt;- read_rds(&quot;data/attributed_parks.rds&quot;) %&gt;% mutate(chosen = FALSE) %&gt;% ungroup() attributed_parks$chosen[55] &lt;- TRUE # create base situation prediction dataset base_choices &lt;- distance_df %&gt;% left_join(attributed_parks, by = c(&quot;park&quot; = &quot;id&quot;)) %&gt;% rename(id = home, alt = park) %&gt;% logit_converter() # create streets situation prediction dataset, augmented by street parks street_choices &lt;- left_join( bind_rows(street_distances, distance_df), bind_rows(street_parks %&gt;% mutate(chosen = FALSE, attractions = FALSE), attributed_parks), by = c(&quot;park&quot; = &quot;id&quot;)) %&gt;% rename(id = home, alt = park) %&gt;% logit_converter() Using this new dataset — augmented with parks added by street openings — we applied the “Sport Detail” non-segmented model to calculate park choice utilities and utility-based accessibility values for each block group in Alameda County. As shown with Equation (3.1), the difference in utility-based accessibility values with and without the opened streets is the consumer surplus provided by the policy. This surplus is given in a unitless utility, but it is possible to convert the surplus into monetary units by diving the surplus by a cost utility coefficient. The dataset used for this research does not have any information on travel costs or entrance fees, and such data would likely not be relevant in the context of urban parks. As a result, there is no direct link between the utility and a monetary cost in our estimated models. As a substitution, we use an estimate of the cost coefficient obtained from the open-source activity-based travel demand model ActivitySim, which is itself based on the regional travel model employed by the Metropolitan Transportation Commission (MTC), the San Francisco Bay regional MPO. ActivitySim uses a cost coefficient of \\(-0.6\\) divided by the each simulated agent’s value of time to determine destination choices for non-work trips.1 In ActivitySim, as in most activity-based travel models, the value of time is considered to vary with an individual’s income, but in this aggregate destination choice model, an aggregate value of time will suffice. The average value of time in the synthetic population for the Bay Area is $7.75 per hour, resulting in a cost coefficient on the destination choice utility of \\(-0.215\\). Dividing the difference in accessibility logsums by the negative of this value gives an initial estimate of the monetary value of the policy to each park user. logsums &lt;- lapply(list(&quot;Base&quot; = base_choices, &quot;Streets&quot; = street_choices), function(df){ u &lt;- predict(base_models$`Sport Detail`, newdata = df, type = &quot;linpred&quot;) logsum &lt;- log(rowSums(exp(u))) list( u = u, logsum = logsum ) }) logsums_tibble &lt;- tibble( geoid = names(logsums$Base$logsum), base = logsums$Base$logsum, streets = logsums$Streets$logsum ) blockgroups &lt;- read_rds(&quot;data/blockgroups.rds&quot;) %&gt;% left_join(logsums_tibble, by = &quot;geoid&quot;) %&gt;% mutate(diff_ls = (streets - base) / 0.215) Figure 4.2 presents this monetary valuation spatially. Unsurprisingly, the benefits are concentrated in the block groups surrounding the opened streets. Most residents of central Oakland see a benefit of somewhere around $1, while some zones see an equivalent benefit of as much as $30. One property of logsum-based accessibility terms is that there is some benefit given for simply having more options, whether or not those options are attractive in any way. In this application, these benefits are small, on the order of 10 cents for most block groups away from where the street openings occurred. bins &lt;- c(0, 0.1, 0.25, 0.5, 1, 2, 10, 35) mypal &lt;- as.character(wesanderson::wes_palette(&quot;Zissou1&quot;, n = 7, type = &quot;continuous&quot;)) if(knitr::is_latex_output()) { alameda_back &lt;- get_map(c(lon = -122.1300334, lat = 37.69427), zoom = 11, source = &quot;stamen&quot;, color = &quot;bw&quot;) alameda_back &lt;- ggmap_bbox(alameda_back) ggmap(alameda_back, extent = &quot;device&quot;) + coord_sf(crs = st_crs(3857), xlim = c(-122.29674 , -122.16358), ylim = c( 37.74098, 37.87028), expand = FALSE) + geom_sf(data = blockgroups %&gt;% st_transform(3857), inherit.aes = FALSE, aes(fill = cut(diff_ls, breaks = bins)), lwd = 0) + scale_fill_manual(&quot;Monetary Benefit ($)&quot;, values = mypal) + geom_sf(data = slowstreets, color = &quot;black&quot;, inherit.aes = FALSE) + theme(axis.line = element_line(color = NA)) + xlab(&quot;&quot;) + ylab(&quot;&quot;) } else { diff_pal &lt;- colorBin(palette = mypal, domain = blockgroups$diff_ls, bins = bins ) leaflet(data = blockgroups %&gt;% st_transform(4326)) %&gt;% addProviderTiles(providers$Esri.WorldGrayCanvas) %&gt;% addPolygons(fillColor = ~diff_pal(diff_ls), stroke = FALSE, fillOpacity = 1) %&gt;% addPolylines(data = slowstreets %&gt;% st_transform(4326), color = &quot;grey&quot;) %&gt;% addLegend(&quot;bottomleft&quot;, pal = diff_pal, values = ~diff_ls, title = &quot;Value of Street Opening&quot;) } Figure 4.2: Monetary value of street opening to residents based on utility change. More interesting than the total benefit or even its spatial distribution, however, is the social equity of its distribution among different population segments. If we assign the block-group level monetary benefit to each household in the block group, we can begin to allocate the distribution of benefits proportionally to households of different sociodemographic classifications. Specifically, if a block group with \\(N\\) total households has a measured consumer surplus \\(\\delta CS\\), then the share of the total benefits going to a particular population segment \\(k\\) is \\[\\begin{equation} S_k = N * P_k * \\delta CS \\tag{4.1} \\end{equation}\\] where and \\(P_k\\) is the proportion of the block group’s population in segment \\(k\\). There is some opportunity for confusion when some demographic variables we use (share of households with children, household income) are defined at the household level and other (ethnicity) are defined at the person level. It is similarly not clear whether the benefits of improved park access should be assigned at the person level, the household level, or the number of total park trip makers in each block group. For consistency and simplicity, we assert that the benefit is assigned to each household, and that persons receive a proportional share of the household benefit. For example, a block group with 30% Black individuals will receive 30% of the benefits assigned to all the households in the block group. Table 4.3 shows the total benefit assigned to households in this way as well as the share of all monetary benefits in the region. In some cases, the policy of opening streets as public spaces had a pro-social benefit, as 18.7% of benefits went to Black individuals, even though only 11.4% of the population of Alameda County is Black. Similarly, roughly one-quarter of total benefits went to households making less than $35,000 per year even though only one-fifth of the households are in this category. On the other hand, a smaller than expected share of benefits is allocated to Asian individuals and households making more than $125,000 per year. # percent of households / individuals in each group demovars &lt;- c(&quot;children&quot;, &quot;lowincome&quot;, &quot;highincome&quot;, &quot;black&quot;, &quot;asian&quot;, &quot;hispanic&quot;, &quot;white&quot;, &quot;all&quot;) demonames &lt;- c(&quot;Households with Children under 6&quot;, &quot;Income &lt; $35k&quot;, &quot;Income &gt; $125k&quot;, &quot;Black&quot;, &quot;Asian&quot;, &quot;Hispanic&quot;, &quot;White&quot;, &quot;All Households&quot;) # Raw demographic totals pop_dist &lt;- blockgroups %&gt;% st_set_geometry(NULL) %&gt;% as_tibble() %&gt;% mutate(all = 100) %&gt;% mutate_at( demovars, (~ ./100 * households)) %&gt;% select(all_of(demovars)) %&gt;% summarise_all(~sum(., na.rm = TRUE)) %&gt;% gather(&quot;group&quot;, &quot;population&quot;) %&gt;% mutate( `pct_pop` = population / population[length(demonames)] * 100 ) bene_dist &lt;- blockgroups %&gt;% st_set_geometry(NULL) %&gt;% as_tibble() %&gt;% # benefit is the choice benefit * households * proportion of category mutate(all = 100) %&gt;% mutate_at( demovars, (~ ./100 * households * diff_ls)) %&gt;% select(all_of(demovars)) %&gt;% summarise_all(~sum(., na.rm = TRUE)) %&gt;% gather(&quot;group&quot;, &quot;benefit&quot;) %&gt;% mutate( pct_benefit = benefit / benefit[length(demonames)] * 100 ) left_join( bene_dist, pop_dist, by = &quot;group&quot; ) %&gt;% mutate( group = demonames, group = fct_relevel(group, &quot;All Households&quot;, after = 1), benefit = scales::dollar(benefit), population = scales::comma(population) ) %&gt;% kbl(caption = &quot;Equity Distribution of Street Opening Benefits&quot;, booktabs = TRUE, col.names = c(&quot;Group&quot;, &quot;Benefit&quot;, &quot;Percent of Benefits&quot;, &quot;Households&quot;, &quot;Percent of Households&quot;), digits = c(0, 0, 2, 0, 2), align = c(&#39;l&#39;, rep(&#39;c&#39;, 4))) %&gt;% kable_styling() %&gt;% column_spec(1, width = &quot;1.8in&quot;) %&gt;% column_spec(2:5, width = &quot;1in&quot;) Table 4.3: Equity Distribution of Street Opening Benefits Group Benefit Percent of Benefits Households Percent of Households Households with Children under 6 $91,530 14.15 86,095 15.13 Income &lt; $35k $157,608 24.36 102,580 18.03 Income &gt; $125k $164,211 25.38 190,573 33.49 Black $117,779 18.20 63,037 11.08 Asian $124,652 19.27 157,980 27.76 Hispanic $144,319 22.31 117,935 20.72 White $220,039 34.01 196,736 34.57 All Households $647,023 100.00 569,070 100.00 By this analysis, the policy to open streets as pedestrian plazas and public spaces appears to be a pro-social policy with substantial benefits to the community. There are some limitations and caveats that ought to be considered; for example, COVID-19 led to the closure of some park facilities that were not captured in this analysis. This policy would lead to a decrease in the consumer surplus for park access, which might overwhelm or at least change the distribution of benefits we measured here. A policy of permanently closing these streets to vehicle traffic would also have potentially deleterious effects on transportation access that would need to be considered against the benefits we measure here; in the case of the COVID-19 quarantine, the opportunity cost of closing a street to nonexistent vehicle traffic is basically zero. To be precise, this is the cost\ncoefficient on the mode choice model for social, recreational, and other trip\npurposes, which influences destination choice through a logsum-based impedance\nterm.↩︎ "],
["limitations.html", " 5 Limitations and Future Directions", " 5 Limitations and Future Directions The ideal dataset for estimating individual choices would be a high-quality, large-sample household travel survey of real individuals. Such a survey would give details on whether an observed trip to a park was actually a recreation trip or rather a different activity entirely. The individual-level demographic data would also be valuable in understanding more clearly the observed heterogeneity in response among different income or ethnic groups. Additionally, the trends and correlations revealed in the presented models may reflect situational inequalities rather than true preferences. For example, the distinct observed parameters on size and distance for minority block groups may indicate that areas with large minority populations tend to have smaller parks that are more geographically distributed relative to other regions of the region. Transit access may also affect park choice and how far people are willing to travel to access a park. Preliminary analysis of our source data indicates a qualitative correlation between good transit access and diverse park use from both a geographic and demographic perspective. We limited our analysis to home locations and parks in Alameda County, California. It is possible that some Alameda residents visit parks in neighboring counties, just as it is possible that parks in Alameda County attract trips from outside the county borders. This is most likely for block groups and parks on the north and south borders of the county. The lower measured accessibility in the area around Berkeley in the northern part of the county () is likely affected by the ommission of parks and residents in Contra Costa County. Using Euclidean distance to represent the distance between the block group centroid and the border of the park leaves something to be desired: Depending on network topography and built environment characteristics, there may be a significant variation in perceived travel times between two parks with similar straight-line distances. That said, a more precise network-based measure might not overcome the inaccuracies resulting from our necessarily measuring distances from the block group centroid. As above, an individual-level survey where the home location is explicitly known would be preferable regardless of the distance method employed. The activity location data used in this specific analysis treats all days of the week and day periods together; it is likely that weekend park choice is substantially different from weekday choice, as the activities performed may be the same. Also recall that the data consider each device-park pair as a unique trip. Repeated trips to the same park may not be properly considered in the data sample. A more precise time-of-day and day-of-week segmentation is warranted. We applied a naive random sampling of the alternatives in our model estimation and validation; a more considered approach involving hierarchical destination sampling may yield more efficient estimates and therefore a clearer picture of the role of size, distance, and other amenities on the observed choices. The relatively weak predictive power of such a simple model formulation (size and distance only) indicates that there is potential to examine the role that additional park amenities — ball fields, playgrounds, water features, etc. — play in the relative attractiveness of parks for different market segments. The quality of park maintenance is another important feature identified in the recreation literature (Fletcher and Fletcher 2003) that is not included here. "],
["conclusions.html", " 6 Conclusions", " 6 Conclusions As transportation professionals seek to improve access to parks and better coordinate transportation and land use efforts — and as researchers more generally try to understand the role parks and open spaces play in public health and society — it is increasingly important to better understand how, when, and why individuals travel to parks. This intersection between recreation and transportation has received relatively little exploration, partially because travel survey data emphasizes weekday travel and because the role of parks in daily activities can be more complicated than with other land uses. This study contributes to the understanding of recreation access by presenting a method to develop access measures explicitly based on the observed choices of individuals. The resulting access measure is continuously defined and incorporates multiple dimensions of access, including the travel necessary to reach all nearby parks as well as the amenities of each of those parks. Further, the measure we have presented reveals heterogeneous preferences for travel and park size across market segments, a heterogeneity that could perhaps be incorporated into an understanding of accessibility. With the growing availability of passive transportation data, there is a correspondingly increased opportunity to explore such data to develop a better understanding of travel patterns in more careful detail than is possible with household travel surveys. Capturing a sufficiently large survey to study trip patterns to a single park is an enormous undertaking, and doing such an exercise for an entire park system is prohibitively expensive and time-consuming. Passive data sets therefore enable analyses that would be unlikely or impossible by other means. Challenges to the representativeness and comprehensiveness of passive data products are in many cases fair, but this should not preclude their use in cases where traditional techniques are not practicable. "],
["acknowledgments.html", "Acknowledgments", " Acknowledgments Graphics and tables were developed using several open-source R packages (Kahle and Wickham 2013; Arel-Bundock 2020; Ram and Wickham 2018). "],
["references.html", "References", " References "]
]
